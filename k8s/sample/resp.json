[
  {
    "op": "add",
    "path": "/spec/containers/0/env/-",
    "value": {
      "name": "aspnetcore_metrics__enabled",
      "value": "true"
    }
  },
  {
    "op": "add",
    "path": "/spec/containers/0/env/-",
    "value": {
      "name": "aspnetcore_metrics__name",
      "value": "incoming"
    }
  },
  {
    "op": "add",
    "path": "/spec/containers/0/env/-",
    "value": {
      "name": "httphandler_metrics__enabled",
      "value": "true"
    }
  },
  {
    "op": "add",
    "path": "/spec/containers/0/env/-",
    "value": {
      "name": "httphandler_metrics__name",
      "value": "outgoing"
    }
  },
  {
    "op": "add",
    "path": "/spec/containers/0/env/-",
    "value": {
      "name": "service__name",
      "value": "sampleapp"
    }
  },
  {
    "op": "add",
    "path": "/spec/containers/0/env/-",
    "value": {
      "name": "METRIC_PROXY__UDS",
      "value": "/var/metricproxy"
    }
  },
  {
    "op": "add",
    "path": "/spec/containers/0/env/-",
    "value": {
      "name": "METRIC_PROXY_SERVER__UDS",
      "value": "/var/metricproxy"
    }
  },
  {
    "op": "add",
    "path": "/spec/containers/0/env/-",
    "value": {
      "name": "METRIC_PROXY_SERVER__STATSD",
      "value": "statsd-prometheus-statsd-exporter:9125"
    }
  },
  {
    "op": "add",
    "path": "/spec/containers/0/env/-",
    "value": {
      "name": "METRIC_PROXY_SERVER__LOG_LEVEL",
      "value": "info"
    }
  },
  {
    "op": "add",
    "path": "/spec/containers/0/env/-",
    "value": {
      "name": "CORECLR_ENABLE_PROFILING",
      "value": "1"
    }
  },
  {
    "op": "add",
    "path": "/spec/containers/0/env/-",
    "value": {
      "name": "CORECLR_PROFILER",
      "value": "{585022b6-31e9-4ddf-b35d-3c256d0a16f3}"
    }
  },
  {
    "op": "add",
    "path": "/spec/containers/0/env/-",
    "value": {
      "name": "CORECLR_PROFILER_PATH",
      "value": "/profiler/DotNetCoreProfiler.so"
    }
  },
  {
    "op": "add",
    "path": "/spec/containers/0/env/-",
    "value": {
      "name": "PROFILER_CONFIGURATION",
      "value": "/profiler/profiler.json"
    }
  },
  {
    "op": "add",
    "path": "/spec/containers/0/env/-",
    "value": {
      "name": "PROFILER_LOG_LEVEL",
      "value": "INFO"
    }
  },
  {
    "op": "add",
    "path": "/spec/containers/0/volumeMounts/-",
    "value": {
      "name": "profiler",
      "readOnly": true,
      "mountPath": "/profiler"
    }
  },
  {
    "op": "add",
    "path": "/spec/volumes/-",
    "value": {
      "name": "profiler",
      "emptyDir": {}
    }
  },
  {
    "op": "add",
    "path": "/spec/initContainers",
    "value": [
      {
        "name": "copy-files",
        "image": "sample:init",
        "command": [
          "/bin/sh"
        ],
        "args": [
          "-c",
          "cp /interceptor/* /profiler/"
        ],
        "resources": {},
        "volumeMounts": [
          {
            "name": "profiler",
            "mountPath": "/profiler"
          }
        ],
        "imagePullPolicy": "Never"
      }
    ]
  }
]
